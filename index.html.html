<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>ğŸ’– ç”œèœœå‘Šç™½ - 520 ä¸“å± ğŸ’–</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* ========== å…¨å±€æ ·å¼ ========== */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: "Helvetica Neue", Arial, sans-serif; background: #fff; overflow-x: hidden; }

    /* é£˜å¿ƒèƒŒæ™¯ */
    .dynamic-bg { position: fixed; inset: 0; background: linear-gradient(45deg,#ffb3d9,#ffd9eb); z-index: -2; }
    .floating-hearts { position: fixed; inset: 0; pointer-events: none; z-index: -1; }
    .heart-particle { position: absolute; font-size: 24px; color: rgba(255,56,96,0.3); animation: float 8s infinite linear; }
    @keyframes float {
      0% { transform: translateY(110vh) rotate(0deg); opacity: .5; }
      50% { transform: translateY(50vh) rotate(180deg); opacity: 1; }
      100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
    }

    /* ä¿¡å°å¼¹å‡º */
    .envelope-container { position: fixed; inset: 0; background: rgba(255,255,255,.1); backdrop-filter: blur(2px); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: opacity .6s; z-index: 1; }
    .envelope { width: 300px; height: 200px; position: relative; transition: transform .8s cubic-bezier(.68,-.55,.27,1.55); }
    .envelope-body { position: absolute; width: 100%; height: 100%; background: linear-gradient(160deg,#ff3860 60%,#ff1744); clip-path: polygon(0 0,100% 0,100%85%,50%100%,0 85%); }
    .envelope-lid { position: absolute; width:100%; height:100%; background: linear-gradient(20deg,#ff1744 30%,#ff3860); clip-path: polygon(0 0,100% 0,50%35%); transform-origin: top; transition: transform .6s; }
    .wax-seal { position:absolute; top:50%; left:50%; transform: translate(-50%,-30%); font-size:3em; color: gold; filter: drop-shadow(0 2px 4px rgba(0,0,0,.3)); animation: sealFloat 2s ease-in-out infinite; }
    @keyframes sealFloat { 0%,100%{transform:translate(-50%,-30%);}50%{transform:translate(-50%,-40%);} }

    /* ä¸»å†…å®¹å®¹å™¨ */
    .container { max-width: 800px; margin: 0 auto; padding: 20px; opacity: 0; visibility: hidden; transition: opacity 1s; }
    .show-content .container { opacity: 1; visibility: visible; }

    /* å€’è®¡æ—¶ */
    #timer { position: sticky; top: 0; background: rgba(255,255,255,.5); padding: 10px; font-size: 2em; color: #ff3860; text-align: center; z-index: 5; }

    /* å¯¼èˆªæŒ‰é’® */
    .nav-buttons { display: flex; flex-wrap: wrap; justify-content: space-around; margin-top: 20px; }
    .nav-buttons button { flex: 1 1 40%; margin: 5px; padding: 12px 20px; border: none; border-radius: 25px; background: #ff3860; color: #fff; font-size: 1em; cursor: pointer; transition: transform .3s; }
    .nav-buttons button:hover { transform: scale(1.05); }

    /* å„æ¨¡å—é€šç”¨ */
    .section { background: rgba(255,255,255,.95); border-radius: 15px; padding: 20px; margin: 20px 0; box-shadow: 0 4px 6px rgba(0,0,0,.1); }
    .hidden { display: none; }

    /* ç…§ç‰‡å¢™ */
    .photo-wall { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 10px; }
    .photo-wrapper { position: relative; }
    .photo-item { max-width: 150px; border-radius: 10px; cursor: zoom-in; transition: transform .3s; }
    .photo-item.zoom { transform: scale(2); z-index: 5; cursor: zoom-out; }
    .delete-btn { position: absolute; top: 5px; right: 5px; width: 24px; height: 24px; border: none; border-radius: 50%; background: rgba(0,0,0,.6); color: #fff; font-size: 16px; cursor: pointer; }

    /* ç•™è¨€ & åƒçº¸é¹¤ & æ„¿æœ› */
    #messageBoard, #craneList, #wishList { max-height: 300px; overflow-y: auto; }
    .message, .crane, .wish { background: #fff; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ffe5ec; display: flex; justify-content: space-between; align-items: center; }
    .wish.completed span { text-decoration: line-through; color: gray; }

    /* åƒçº¸é¹¤åŠ¨ç”» */
    .crane.animate { animation: pop .5s ease; }
    @keyframes pop { 0%{transform:scale(0);}50%{transform:scale(1.2);}100%{transform:scale(1);} }

    /* å“åº”å¼ */
    @media(max-width:768px){ .nav-buttons{flex-direction:column;} .nav-buttons button{flex:1 1 100%;} }
    @media(max-width:480px){ textarea,input{width:100%;} .section{padding:15px;margin:15px 0;} .delete-btn{width:20px;height:20px;font-size:12px;} }
    
    /* éšè—çˆ±å¿ƒä¿¡ä»¶ */
    #bottomHeart { position: fixed; bottom: 20px; right: 20px; font-size: 48px; opacity: 0.1; cursor: pointer; display: none; z-index: 2; }
    .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.5); align-items: center; justify-content: center; z-index: 3; }
    .modal-content { background: #fffbe6; border: 2px solid #ffd1dc; border-radius: 10px; padding: 20px; width: 80vw; max-width: 400px; font-family: 'Segoe Script', cursive; white-space: pre-wrap; position: relative; }
    .modal-content h3 { text-align: center; margin-bottom: 10px; color: #ff3860; }
    .modal-content p { color: #333; line-height: 1.6; }
    .close-btn { position: absolute; top: 10px; right: 10px; font-size: 1.5em; color: #ff3860; background: none; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <!-- é£˜å¿ƒèƒŒæ™¯ -->
  <div class="dynamic-bg">
    <div class="floating-hearts" id="heartsContainer"></div>
  </div>

  <!-- ä¿¡å°äº¤äº’ -->
  <div id="envelopeContainer" class="envelope-container">
    <div id="envelope" class="envelope">
      <div class="envelope-body"></div>
      <div class="envelope-lid"></div>
      <div class="wax-seal">ğŸ’Œ</div>
    </div>
  </div>

  <!-- éšè—çš„åº•éƒ¨çˆ±å¿ƒ -->
  <div id="bottomHeart">â¤ï¸</div>

  <!-- ä¿¡ä»¶å¼¹çª— -->
  <div id="letterModal" class="modal">
    <div class="modal-content">
      <button class="close-btn" onclick="toggleLetter(false)">&times;</button>
      <h3>è‡´äº²çˆ±çš„ä½ ï¼š</h3>
      <p>
ä»Šå¤©æ˜¯5æœˆ20æ—¥ï¼Œä¸€ä¸ªå› ä¸ºâ€œæˆ‘çˆ±ä½ â€çš„è°éŸ³è€Œå˜å¾—ç‰¹åˆ«çš„æ—¥å­ã€‚ä½†å…¶å®å¯¹æˆ‘æ¥è¯´ï¼Œæ¯ä¸€å¤©éƒ½æƒ³å¯¹ä½ è¯´æ— æ•°éâ€œæˆ‘çˆ±ä½ â€ã€‚  
é‡è§ä½ ï¼Œæ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€æ¸©æŸ”çš„æ„å¤–ã€‚ä»æœ€åˆçš„å¿ƒåŠ¨åˆ°ç°åœ¨çš„æ·±æ·±çˆ±æ‹ï¼Œä½ çš„ç¬‘å®¹ã€ä½ çš„è„¾æ°”ã€ä½ çš„å°ä¹ æƒ¯ï¼Œæ—©å·²æˆä¸ºæˆ‘ç”Ÿæ´»ä¸­æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚æœ‰æ—¶å€™æˆ‘åœ¨æƒ³ï¼Œè¿™ä¸ªä¸–ç•Œä¸Šæ€ä¹ˆä¼šæœ‰ä½ è¿™æ ·çš„äººï¼Œæ¸©æŸ”åˆå€”å¼ºï¼Œå¯çˆ±åˆè®¤çœŸï¼Œè„†å¼±æ—¶è®©æˆ‘å¿ƒç–¼ï¼Œåšå¼ºæ—¶è®©æˆ‘æ•¬ä½©ã€‚  
åœ¨ä½ èº«è¾¹ï¼Œæˆ‘å˜å¾—è¶Šæ¥è¶Šåƒä¸€ä¸ªå®Œæ•´çš„äººã€‚æˆ‘å¼€å§‹æœŸå¾…æœªæ¥ï¼Œå¼€å§‹è®¤çœŸè§„åˆ’ç”Ÿæ´»ï¼Œåªå› ä¸ºæˆ‘çŸ¥é“ï¼Œæœ‰ä½ é™ªä¼´çš„æ˜å¤©ï¼Œæ‰å€¼å¾—æˆ‘æ‹¼å°½å…¨åŠ›ã€‚  
å¦‚æœå¯ä»¥ï¼Œæˆ‘æƒ³æŠŠæ¯ä¸ªå¹³å‡¡çš„æ—¥å­éƒ½å’Œä½ è¿‡å¾—ä¸å¹³å‡¡ã€‚æˆ‘æƒ³ç‰µä½ çš„æ‰‹èµ°è¿‡äººæµ·ï¼Œé™ªä½ åƒéä½ æƒ³åƒçš„å°åƒï¼Œç»™ä½ è®²å†·ç¬‘è¯ï¼Œçœ‹ä½ ç¿»ç™½çœ¼ä½†è¿˜æ˜¯ç¬‘å¾—å¼€å¿ƒã€‚æˆ‘æƒ³é™ªä½ ç†¬è¿‡äººç”Ÿçš„éš¾ï¼Œä¹Ÿæƒ³å’Œä½ ä¸€èµ·äº«å°½ç”Ÿæ´»çš„å°ç¡®å¹¸ã€‚  

äº²çˆ±çš„ï¼Œè°¢è°¢ä½ çˆ±æˆ‘ï¼Œè°¢è°¢ä½ é€‰æ‹©æˆ‘ã€‚å¾€åä½™ç”Ÿï¼Œæˆ‘ä¹Ÿä¼šå°½æˆ‘æ‰€èƒ½å»æˆä¸ºä½ å€¼å¾—ä¾é çš„äººï¼Œæ°¸è¿œç«™åœ¨ä½ èº«è¾¹ï¼Œæ— è®ºæ™´å¤©è¿˜æ˜¯é›¨å¤©ã€‚  

520å¿«ä¹ï¼Œæˆ‘çš„å¥³å­©ã€‚  
æ°¸è¿œçˆ±ä½ çš„ï¼š  
çˆ±ä½ çš„æ²ˆé’Šæ°‘  
2025å¹´5æœˆ20æ—¥
      </p>
    </div>
  </div>

  <!-- ä¸»å†…å®¹ -->
  <div id="mainContent" class="container">
    <!-- å€’è®¡æ—¶ -->
    <div id="timer" class="section"></div>

    <!-- å¯¼èˆªæŒ‰é’® -->
    <div class="nav-buttons">
      <button data-target="gallerySection">ğŸ“¸ ç”»å»Š</button>
      <button data-target="messageSection">ğŸ’Œ ç•™è¨€æ¿</button>
      <button data-target="craneSection">ğŸ¦¢ åƒçº¸é¹¤</button>
      <button data-target="wishSection">ğŸ¯ æ„¿æœ›æ¸…å•</button>
    </div>

    <!-- ç”»å»Š -->
    <section id="gallerySection" class="section hidden">
      <h2>ğŸ“¸ æˆ‘ä»¬çš„è®°å¿†ç”»å»Š</h2>
      <input id="photoUpload" type="file" accept="image/*" multiple>
      <div id="photoWall" class="photo-wall"></div>
    </section>

    <!-- ç•™è¨€æ¿ -->
    <section id="messageSection" class="section hidden">
      <h2>ğŸ’Œ çˆ±çš„ç•™è¨€æ¿</h2>
      <textarea id="messageInput" placeholder="è¾“å…¥ä½ çš„å¿ƒæ„..." rows="3"></textarea>
      <button onclick="addMessage()">ğŸ’– ä¿å­˜ç•™è¨€</button>
      <div id="messageBoard"></div>
    </section>

    <!-- åƒçº¸é¹¤ -->
    <section id="craneSection" class="section hidden">
      <h2>ğŸ¦¢ çŸ›ç›¾åƒçº¸é¹¤</h2>
      <textarea id="craneInput" placeholder="å†™ä¸‹ä½ çš„å°å°çŸ›ç›¾..." rows="3"></textarea>
      <button onclick="addCrane()">ğŸ“ æŠ˜æˆåƒçº¸é¹¤</button>
      <div id="craneList"></div>
      <div id="bottleCount">å·²è£…å…¥ç»ç’ƒç“¶ï¼š<span id="bottles">0</span>/30</div>
      <div id="voucher" class="hidden">ğŸ æ­å–œï¼ä½ è·å¾—äº†ä¸€ä¸ªæ„¿æœ›å…‘æ¢åˆ¸ï¼</div>
    </section>

    <!-- æ„¿æœ›æ¸…å• -->
    <section id="wishSection" class="section hidden">
      <h2>ğŸ¯ åœ¨ä¸€èµ·ä¸€å®šè¦å®Œæˆçš„æ„¿æœ›</h2>
      <input id="wishInput" type="text" placeholder="è¾“å…¥ä½ çš„æ„¿æœ›...">
      <button onclick="addWish()">âœï¸ æ·»åŠ æ„¿æœ›</button>
      <div id="wishList"></div>
    </section>
  </div>

  <script>
    // é£˜å¿ƒèƒŒæ™¯
    function createHearts() {
      const icons = ['â¤ï¸','ğŸ’–','ğŸ’—','ğŸ’“'];
      setInterval(() => {
        const h = document.createElement('div');
        h.className = 'heart-particle';
        h.textContent = icons[Math.floor(Math.random()*icons.length)];
        h.style.left = Math.random()*100 + 'vw';
        document.getElementById('heartsContainer').appendChild(h);
        setTimeout(() => h.remove(), 8000);
      }, 300);
    }
    createHearts();

    // ä¿¡å°æ‰“å¼€
    document.getElementById('envelopeContainer').addEventListener('click', () => {
      const env = document.getElementById('envelope');
      env.style.transform = 'translateY(-50%) scale(1.5) rotate(-10deg)';
      env.querySelector('.envelope-lid').style.transform = 'rotateX(180deg)';
      setTimeout(() => {
        document.getElementById('envelopeContainer').style.opacity = '0';
        document.getElementById('bottomHeart').style.display = 'block';
        document.body.classList.add('show-content');
        setTimeout(() => document.getElementById('envelopeContainer').style.display = 'none', 500);
      }, 800);
    });

    // å¼¹ä¿¡åŠŸèƒ½
    function toggleLetter(show) {
      document.getElementById('letterModal').style.display = show ? 'flex' : 'none';
    }
    document.getElementById('bottomHeart').addEventListener('click', () => toggleLetter(true));

    // è®¡æ—¶å™¨
    const startDate = new Date('2025-04-18');
    function updateTimer() {
      const now = new Date(), diff = now - startDate;
      const days = Math.floor(diff/86400000), hrs = Math.floor((diff%86400000)/3600000);
      document.getElementById('timer').innerHTML = `ğŸ’ ${days} å¤© ${hrs} å°æ—¶<br><small>è‡ª ${startDate.toLocaleDateString()} èµ·</small>`;
    }
    setInterval(updateTimer, 1000);
    updateTimer();

    // æ¨¡å—åˆ‡æ¢
    document.querySelectorAll('.nav-buttons button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
        document.getElementById(btn.dataset.target).classList.remove('hidden');
      });
    });

    // ç…§ç‰‡å¢™
    document.getElementById('photoUpload').addEventListener('change', e => {
      Array.from(e.target.files).forEach(file => {
        const reader = new FileReader();
        reader.onload = ev => {
          const wrapper = document.createElement('div');
          wrapper.className = 'photo-wrapper';
          const img = new Image();
          img.src = ev.target.result;
          img.className = 'photo-item';
          img.onclick = () => img.classList.toggle('zoom');
          const del = document.createElement('button');
          del.className = 'delete-btn';
          del.textContent = 'Ã—';
          del.onclick = () => wrapper.remove();
          wrapper.append(img, del);
          document.getElementById('photoWall').appendChild(wrapper);
        };
        reader.readAsDataURL(file);
      });
    });

    // ç•™è¨€æ¿
    function addMessage() {
      const i = document.getElementById('messageInput');
      if (!i.value.trim()) return;
      const b = document.createElement('div');
      b.className = 'message';
      b.innerHTML = `<div>${new Date().toLocaleString()}</div><div>${i.value}</div>`;
      document.getElementById('messageBoard').prepend(b);
      i.value = '';
    }

    // åƒçº¸é¹¤
    let bottleCount = 0;
    function addCrane() {
      const i = document.getElementById('craneInput');
      if (!i.value.trim() || bottleCount >= 30) return;
      const c = document.createElement('div');
      c.className = 'crane animate';
      c.textContent = i.value;
      document.getElementById('craneList').prepend(c);
      c.addEventListener('animationend', () => c.classList.remove('animate'));
      bottleCount++;
      document.getElementById('bottles').textContent = bottleCount;
      i.value = '';
      if (bottleCount === 30) document.getElementById('voucher').classList.remove('hidden');
    }

    // æ„¿æœ›æ¸…å•
    function addWish() {
      const i = document.getElementById('wishInput');
      if (!i.value.trim()) return;
      const w = document.createElement('div');
      w.className = 'wish';
      const span = document.createElement('span');
      span.textContent = i.value;
      const btn = document.createElement('button');
      btn.textContent = 'âœ”';
      btn.onclick = () => w.classList.toggle('completed');
      w.append(span, btn);
      document.getElementById('wishList').appendChild(w);
      i.value = '';
    }
  </script>
</body>
</html>
